<!doctype HTML>
<html>
<head>
<title>Informed Traveler - Insight Data Engineering Fellow Project -
Seda Davtyan</title>
<link rel="stylesheet" type="text/css" href="../static/style.css"/>
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
<script src="../static/js/jpgraph.js" type="text/javascript" charset="utf-8"></script>
<script src="../static/js/highstock.js" type="text/javascript" ></script>
<!--<script src="../static/js/exporting.js"></script>
<script src="../static/js/highcharts.js"></script>-->
<script src="http://code.highcharts.com/stock/modules/exporting.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>


<script>

$(function() {
  $( "#from" ).datepicker({
                            defaultDate: "+1w",
                            changeMonth: true,
                            changeYear: true,
                            yearRange: "1987:2014",
                            numberOfMonths: 1,
                            onClose: function( selectedDate )
                                     {
                                       $( "#to" ).datepicker( "option", "minDate", selectedDate );
                                     }
                        });

  $( "#to" ).datepicker({
                            defaultDate: "+1w",
                            changeMonth: true,
                            changeYear: true,
                            yearRange: "1987:2014",
                            numberOfMonths: 1,
                            onClose: function( selectedDate )
                                    {
                                      $( "#from" ).datepicker( "option", "maxDate", selectedDate );
                                    }
                        });
});
</script>

<script type="text/javascript" src="../static/js/svg.jquery.js"></script>
<script type="text/javascript" src="../static/js/pygal-tooltips.js"></script>


<script>
  var allInputs = ["airline","to","from","holiday", "year", "flightNum", "season"];
  var neededInputs = {};

  function clearAllInputs() {
    var allLength = allInputs.length;
    for (var i = 0; i < allLength; i++){
      document.getElementById(allInputs[i]).style.visibility = "hidden";
      document.getElementById(allInputs[i]).style.display = "none";
    }
  }
  function enableNeededInputs(report_type) {
    var neededLength = dependencyDir[report_type].length;
    for (var i = 0; i < neededLength; i++){
      document.getElementById(dependencyDir[report_type][i]).style.visibility = "visible";
      document.getElementById(dependencyDir[report_type][i]).style.display = "inline";
    }
  }
  function reportChanged() {
    clearAllInputs();
    enableNeededInputs(document.getElementById("report_type").value);
  }
  var dependencyDir = {};
  dependencyDir["delay_category"] = ["airline","to","from"];
  dependencyDir["delay_holiday"] = ["airline","holiday"];
  dependencyDir["delay_flightNum"] = ["airline","flightNum","to","from"];
  dependencyDir["delay_career"] = ["to","from"];
  dependencyDir["delay_season"] = ["airline", "flightNum", "year"];

</script>
</head>
<body>

<div class=page>
  <table width="100%" cellspacing="5px">
    <tr>
      <td colspan="2" class="proj_title">Informed Traveler</td>
    </tr>
    <tr>
      <td class="author">Seda Davtyan, PhD</td>
      <td class="company">Insight Data Engineering Fellow Project</td>
    </tr>
  </table>
  <!--
  <h1>Seda Davtyan - Insight Data Engineering Fellow</h1>
  <h1>Pleasant Travel</h1>
  -->

    {% if data != '' %}
        <p>Airline: {{data['airline']}} From: {{data['from']}} To: {{data['to']}}</p>
    {% else %}
        <p>Enter Airline</p>
    {% endif %}

    <form id="reportForm" action='' method='post' onchange="reportChanged()">
     <div class="report-type">
       <select name="report_type" id="report_type">
	 <option value="delay_category" selected="selected">Delay Categorization</option>
	 <option value="delay_holiday">Delay on Holidays</option>
	 <option value="delay_career">Airline Related Delays</option>
	 <option value="delay_flightNum">Delay by Flight Number</option>
	 <option value="delay_season">Delay by Season</option>
       </select>
     </div>
       
       <div class="entries">
         <input name="airline" type="text" id="airline" list="airline" placeholder="Airline">
         <input name="holiday" type="text" id="holiday" list="holiday_list" placeholder="Holiday">
	 <input name="year" type="text" id="year" list="year_list" placeholder="Year">
	 <input name="flightNum" type="text" id="flightNum" list="flight_num" placeholder="Flight Number">
	 <input name="season" type="text" id="season" list="season_list" placeholder="Season">
         <input class="dateitem" type="text" id="from" name="from" placeholder="From Date">
         <input class="dateitem" type="text" id="to" name="to" placeholder="To Date">
         <button class="submitButton" type="submit">Submit Query</button>
       </div>
       
    </form>
       <div class="clear-line">&nbsp;</div>
	<div class="results">
	<hr/>
	<h3>Results:</h3>
	<hr/>
<!--	<p>pie test</p> -->
	<div id="pieEx" style="height: 400px; min-width: 310px"></div>
<!--	<hr/>
	<p>result test</p>
	<div id="testdata" style="height: 400px; min-width: 310px"></div>
	<p>result 1</p>
	<div id="graph" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>
	<hr/>
	<p>result 2</p>
	<div id="testdata2" style="height: 400px; min-width: 310px"></div>
	</div> -->
<!--	<div class="clear-line">&nbsp;</div>
	<div class="floatL">one</div> <div class="floatL">two</div> <div class="floatL">three</div> -->
</div>

<datalist id="airline">
              <option value="9E">
              <option value="AA">
	      <option value="AQ">
	      <option value="AS">
	      <option value="B6">
	      <option value="CO">
	      <option value="DH">
              <option value="DL">
	      <option value="E*">
	      <option value="EV">
	      <option value="F9">
	      <option value="FL">
	      <option value="HA">
	      <option value="HP">
	      <option value="MQ">
	      <option value="NW">
	      <option value="OH">
	      <option value="OO">
	      <option value="TW">
	      <option value="TZ">
              <option value="UA">
	      <option value="US">
	      <option value="VX">
	      <option value="WN">
	      <option value="XE">
	      <option value="YV">
</datalist>
<datalist id="holiday_list">
              <option value="New Year">
              <option value="Christmas">
              <option value="Thanksgiving">
	      <option value="Independence Day">
</datalist>

</script>

<script type="text/javascript" charset="utf-8">
$(function() {

    var options = {
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: 1,//null,
            plotShadow: false
        },
        title: {
            text: 'Categories of Delay for the selected Airline and Dates'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage:.2f}%</b>'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    format: '<b>{point.name}</b>: {point.percentage:.2f} %',
                    style: {
                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: 'Browser share',
            data: {}
	}]
    };

    $.getJSON('../static/categ_1.json', function(data) {
        options.series[0].data = data;
        var chart = new Highcharts.Chart(options);
    });
    $('#pieEx').highcharts(options);

});
</script>

<!--
<script type="text/javascript" charset="utf-8">

 $(function () {

    $.getJSON('../static/testdata.txt', function (data) {
        // Create the chart
        $('#testdata').highcharts('StockChart', {


            rangeSelector : {
                selected : 1,
                inputEnabled: $('#testdata').width() > 480
            },

            title : {
                text : 'AAPL Stock Price'
            },

            series : [{
                name : 'AAPL',
                data : data,
                tooltip: {
                    valueDecimals: 2
                }
            }]
        });
    });

});
</script>
-->
<script>
  reportChanged(); // to set only the currently selected (at load time, the default) report options to show
</script>
</body>
</html>
